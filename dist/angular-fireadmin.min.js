!function(a){"user strict";angular.module("fireadmin",[]).value("Firebase",a.Firebase).value("Firebase",a.Fireadmin)}(window),function(a){"use strict";angular.module("fireadmin").factory("$fa",["sessionService",function(b){return a.Fireadmin.prototype={$auth:function(){},$session:function(){return b(this)}},function(b){return new a.Fireadmin(b)}}]).factory("FireAdminFactory",function(){return function(b){return new a.Fireadmin(b)}})}(window),function(){"use strict";angular.module("fireadmin.session").factory("GroupFactory",["$firebaseObject","$q",function(a,b){return a.$extend({getMessages:function(){var a=b.defer();return a.promise},sendMessage:function(a){var c=b.defer();_.has(a,"type")||(a.type="text"),a.createdAt=Firebase.ServerValue.TIMESTAMP;var d=this.child("messages").push(a);return d.set(function(a){a?c.reject(a):c.resolve(d)}),c.promise},shareListing:function(a){var c=b.defer(),d={author:this.$getAuth().uid,listingId:a.$id,type:"listing"},e=this;return this.sendMessage(d).then(function(){e.child("listings").push(d,function(a){a&&c.reject(a),c.resolve(e)})},function(a){c.reject(a)}),c.promise},inviteByEmail:function(){}})}]).factory("Group",["GroupFactory","FBURL",function(a,b){return function(c){if(!c)throw"Id needed for group factory";new Firebase(b+"/groups/"+c);return new a(groupsRef)}}]).factory("GroupsArray",["$firebaseArray","$q","GroupFactory",function(a,b,c){return a.$extend({findGroup:function(a){var c=b.defer();return this.$loaded().then(function(b){c.resolve(_.findWhere(b,{name:a}))},function(a){c.reject(a)}),c.promise},$$added:function(a){return new c(a.ref())}})}]).factory("GroupsArrayFactory",["Group","FBURL",function(a,b){return function(){var c=new Firebase(b);if(c.getAuth()){{c.orderByChild("owner").equalTo(c.getAuth().uid)}return new a(groupRef)}return null}}])}(),function(){"use strict";angular.module("fireadmin.session").factory("UserFactory",["$firebaseObject",function(a){return a().$extend({getUsername:function(){return this.email},toJson:function(){}})}]).factory("User",["UserFactory","FireAdminFactory",function(a,b){return function(c){b.child("users").child(c);return new a}}])}(),function(){"use strict";angular.module("fireadmin.session",["firebase"]).factory("sessionService",["$q","$firebaseAuth","FireAdminFactory",function(a,b,c){return function(d){var d=c(),e=b(d.ref),f=null;return{signup:function(b){var c=a.defer();return d.userSignup(b,function(a){f=a,c.resolve(a)},function(a){c.reject(a)}),c.promise},login:function(b){var c=a.defer();if("object"==b)d.login(b,function(a){a?(f=a,c.resolve(f)):c.reject()});else{var e=[{name:"GitHub",value:"githubAuth()",lower:"github"},{name:"Twitter",value:"twitterAuth()",lower:"twitter"},{name:"Google",value:"googleAuth()",lower:"google"}],g=goog.array.findIndex(e,function(a){return b.toLowerCase()===a.lower});(g=-1)&&c.reject({message:"Invalid login provider.",status:"INVALID_PARAMS"});var h=e[g];h.value.apply(this,null)}return c.promise},logout:function(){var b=a.defer();return e=null,f=null,d.ref.logout(function(){b.resolve()}),b.promise},getAuth:function(){return e=d.ref.getAuth()},authPromise:function(){var b=a.defer();return b.resolve(d.ref.getAuth()),b.promise},getCurrentUser:function(){var b=a.defer();return null!=f?b.resolve(f):d.getUser(function(a){a?(f=a,b.resolve(f)):b.reject(null)}),b.promise}}}}])}();