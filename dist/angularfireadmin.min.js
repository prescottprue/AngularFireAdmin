!function(a){"user strict";angular.module("fireadmin",["firebase"]).value("Firebase",a.Firebase).value("Fireadmin",a.Fireadmin)}(window),function(){"use strict";angular.module("fireadmin").factory("sessionService",["$q","$firebaseAuth",function(a,b){return function(c){var d=b(c.ref),e=null;return{signup:function(b){var d=a.defer();return c.userSignup(b,function(a){e=a,d.resolve(a)},function(a){d.reject(a)}),d.promise},login:function(b){var d=a.defer();if("object"==b)c.login(b,function(a){a?(e=a,d.resolve(e)):d.reject()});else{var f=[{name:"GitHub",value:"githubAuth()",lower:"github"},{name:"Twitter",value:"twitterAuth()",lower:"twitter"},{name:"Google",value:"googleAuth()",lower:"google"}],g=goog.array.findIndex(f,function(a){return b.toLowerCase()===a.lower});(g=-1)&&d.reject({message:"Invalid login provider.",status:"INVALID_PARAMS"});var h=f[g];h.value.apply(this,null)}return d.promise},logout:function(){var b=a.defer();return d=null,e=null,c.ref.logout(function(){b.resolve()}),b.promise},getAuth:function(){return d=c.ref.getAuth()},authPromise:function(){var b=a.defer();return b.resolve(c.ref.getAuth()),b.promise},getCurrentUser:function(){var b=a.defer();return null!=e?b.resolve(e):c.getUser(function(a){a?(e=a,b.resolve(e)):b.reject(null)}),b.promise}}}}])}(),function(){"use strict";angular.module("fireadmin").factory("GroupFactory",["$firebaseObject","$q",function(a,b){return a.$extend({getMessages:function(){var a=b.defer();return a.promise},sendMessage:function(a){var c=b.defer();_.has(a,"type")||(a.type="text"),a.createdAt=Firebase.ServerValue.TIMESTAMP;var d=this.child("messages").push(a);return d.set(function(a){a?c.reject(a):c.resolve(d)}),c.promise},shareListing:function(a){var c=b.defer(),d={author:this.$getAuth().uid,listingId:a.$id,type:"listing"},e=this;return this.sendMessage(d).then(function(){e.child("listings").push(d,function(a){a&&c.reject(a),c.resolve(e)})},function(a){c.reject(a)}),c.promise},inviteByEmail:function(){}})}]).factory("Group",["GroupFactory","FBURL",function(a,b){return function(c){if(!c)throw"Id needed for group factory";new Firebase(b+"/groups/"+c);return new a(groupsRef)}}]).factory("GroupsArray",["$firebaseArray","$q","GroupFactory",function(a,b,c){return a.$extend({findGroup:function(a){var c=b.defer();return this.$loaded().then(function(b){c.resolve(_.findWhere(b,{name:a}))},function(a){c.reject(a)}),c.promise},$$added:function(a){return new c(a.ref())}})}]).factory("GroupsArrayFactory",["Group","FBURL",function(a,b){return function(){var c=new Firebase(b);if(c.getAuth()){{c.orderByChild("owner").equalTo(c.getAuth().uid)}return new a(groupRef)}return null}}])}(),function(){"use strict";angular.module("fireadmin").factory("UserFactory",["$firebaseObject",function(a){return a().$extend({getUsername:function(){return this.email},toJson:function(){}})}]).factory("User",["UserFactory","FireAdminFactory",function(a,b){return function(c){b.child("users").child(c);return new a}}])}(),function(a){angular.module("fireadmin").factory("$fa",["FireAdminFactory",function(a){return function(b){return a(b)}}]).factory("FireAdminFactory",["sessionService",function(b){return function(c){return a.Fireadmin.prototype.$auth=function(){return $firebaseAuth(arguments)},a.Fireadmin.prototype.$session=function(){return b},new a.Fireadmin(c)}}])}(window);